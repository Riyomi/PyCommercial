{% extends 'base.html' %}
{% load products.productfilters %}
{% block title %}My Orders{% endblock title %}

{% block content %}
<div class="flex flex-col mx-auto rounded-lg p-5 w-6/12 mt-4 bg-white">
    <div class="title-h1">Order #{{data.order}} </div>
 
  <div class="grid grid-cols-2 px-4">
    <div>
      <p class="title-h2">Order information</p>
      <div class="px-2">ID: #{{data.order}} </div>
      <div class="px-2">Placed on: {{data.order.date_placed}} </div>
    </div>

    <div>
      <p class="title-h2">Customer information</p>
      <div class="px-2">{{data.order.first_name}} {{data.order.last_name}}</div>
      <div class="px-2">{{data.order.email}}</div>
      <div class="px-2">{{data.order.mobile}}</div>
    </div>

    <div>
      <p class="title-h2">Delivery information</p>
      <div class="px-2">{{data.order.address}}, {{data.order.city}}, {{data.order.country}}</div>
    </div>

    <div>
      <p class="title-h2">Payment information</p>
      <div class="px-2">{{data.order.payment.name}}</div>
      <div class="px-2">{{data.order.payment.number|hide_credit_card_info}}</div>
      <div class="px-2">{{data.order.payment.expiry_date}}</div>
    </div>
  </div>

  <div class="mb-4">  
  <p class="title-h2">Status</p>
  <div class="flex justify-between">
    {% for status in data.order.get_status_choices %}
      {% if status.0 <= data.order.status %}
        <div class="stepper-item completed">
          <div class="step-counter">âœ“</div>
          <div class="step-name">{{status.1}}</div>
        </div>
      {% else %}
        <div class="stepper-item">
          <div class="step-counter"></div>
          <div class="step-name">{{status.1}}</div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
  </div>

  <p class="title-h2">Products</p>

  <table class="table-fixed w-full rounded-lg">
        <thead class="border-b text-left">
          <tr>
            <th class="w-8/12 py-2 pl-4">Product</th>
            <th class="w-4/12 py-2">Quantity</th>
            <th class="w-4/12 py-2">Price</th>
            <th class="w-4/12 py-2">Total Price</th>
          </tr>
        </thead>
        <tbody class="border-b">
          {%for item in data.items %}
          <tr>
            <td class="mx-auto">
              <a href="/home/browse/product/{{key}}">
                <img src="{{ item.product.image.url|formaturl }}" class="w-28 inline-block" />
                <span> {{ item.product.name }} </span>
              </a>
            </td>
            <td><span>x{{ item.quantity }}</span></td>
            <td><span>${{ item.product.price }}</span></td>
            <td><span>${% widthratio item.product.price 1 item.quantity %}</span></td>
            {% endfor %}
          </tr>
        </tbody>
      </table>
  <div class="self-end">
    Total: ${{data.order.total}}
  </div>
</div>
{% endblock content %}
