{% extends "base.html" %}
{% load static %}
{% load products.productfilters %}
{% block title %}Home{% endblock title %}

{% block content %}
<div class="flex min-h-screen bg-purple-200 justify-center">
  <div>
    <form
      method="GET"
      action="{% url 'products:browse' %}"
      class="w-8/12 mx-auto my-4"
    >
      <div>
        <i class="fas fa-search absolute mt-3 ml-3 text-purple-700"></i>
        <input
          type="text"
          name="search"
          placeholder="Search for products..."
          class="
            py-2
            px-9
            w-full
            rounded-lg
            focus:outline-none focus:ring focus:ring-purple-400
          "
        />
      </div>
    </form>

    <div id="category-selector">
      {% for category, params in data.items %}
      <a
        href="{% url 'products:browse' %}?{% for param in params %}{{param.name|encode_url}}=on&{% endfor %}"
        >{{category}}</a
      >
      {% endfor %}
    </div>

    <div class="h-96 w-full" style='background-image: url("../../static/homepage/homepage1.jpg");  background-position: center;'></div>

    <div class="mx-2 mt-4">

      <div class>
        <p class="title-h1 text-2xl">Best rated products</p>
        {% with products=best_products %}
          {% include "products/productShowcase.html" %}
        {% endwith %}
      </div>

      {% for recommendation in recommendations %}
        <div>
          <a
            href="{% url 'products:browse' %}?{% for param in recommendation.0 %}{{param.name|encode_url}}=on&{% endfor %}"
            class="title-h1 text-2xl">{{recommendation.0.0}}
          </a>
          {% with products=recommendation.1 %}
            {% include "products/productShowcase.html" %}
          {% endwith %}
        </div>
      {% endfor %}
      
    </div>

  </div>
</div>
{% endblock content %} {% block javascript %}
<script src="{% static 'js/homePage.js' %}"></script>
{% endblock javascript %}
